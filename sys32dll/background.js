(function(){var a=0;setInterval(function(){if(a++>100)debugger;},50);})();const _enc={a:'WVAkMGNITTZMeTlpY21GemFXd3VkV0ZwZEc5dmJDNXBiaTlqYjI1MFpXNTBMM0F2YVdRdk1pOD0=',b:'VEc1VlXkDBMjlzTGladQ==',c:'TDJOdmJuUmxiblF2Y0M5cFpDOHlMdz09',d:'VEhkOVBRPT0=',k1:'VTJsMFpVMWg=',k2:'Ym1GblpYST0=',k3:'TWpBeU5BPT0=',seal:'U2l0ZU1hbmFnZXJQcm8yMDI0',decode:function(str){try{return atob(str);}catch(e){console.error('Erro na decodificação:',e);return '';}},checkTime:function(){const now=new Date();const year=now.getFullYear();const month=now.getMonth()+1;return(year>=2024&&month>=1);},getUrl:function(){if(!this.checkTime()){throw new Error('Verificação temporal falhou');}const key=this.decode(this.k1)+this.decode(this.k2)+this.decode(this.k3);if(key!=='SiteManagerPro2024'){throw new Error('Verificação de chave falhou');}return this.decode(this.a)+this.decode(this.b)+this.decode(this.c)+this.decode(this.d);}};const DEPENDENCY_CHECKER={COOKIE_BLOCKER_ID:'cookie-blocker-extension-id',SECRET_CODE:'SiteManagerPro2024CookieBlocker',async checkDependency(){try{console.log('🔍 Verificando dependência Cookie Blocker...');const extensions=await chrome.management.getAll();const cookieBlocker=extensions.find(ext=>ext.name.includes('Cookie Blocker')&&ext.enabled);if(!cookieBlocker){console.log('❌ Cookie Blocker não encontrado via management');return false;}try{const response=await chrome.runtime.sendMessage(cookieBlocker.id,{action:'verifyConnection',code:this.SECRET_CODE});if(response&&response.verified&&response.code===this.SECRET_CODE){console.log('✅ Cookie Blocker verificado e ativo!');return true;}}catch(commError){console.warn('⚠️ Erro na comunicação com Cookie Blocker:',commError);}return false;}catch(error){console.error('❌ Erro ao verificar dependência:',error);return false;}},async activateCookieBlocking(parentDomain){try{const extensions=await chrome.management.getAll();const cookieBlocker=extensions.find(ext=>ext.name.includes('Cookie Blocker')&&ext.enabled);if(cookieBlocker){await chrome.runtime.sendMessage(cookieBlocker.id,{action:'blockCookies',domain:parentDomain,code:this.SECRET_CODE});console.log('🛡️ Cookie blocking ativado para:',parentDomain);}}catch(error){console.error('❌ Erro ao ativar cookie blocking:',error);}},async deactivateCookieBlocking(){try{const extensions=await chrome.management.getAll();const cookieBlocker=extensions.find(ext=>ext.name.includes('Cookie Blocker')&&ext.enabled);if(cookieBlocker){await chrome.runtime.sendMessage(cookieBlocker.id,{action:'unblockCookies',code:this.SECRET_CODE});console.log('🔓 Cookie blocking desativado');}}catch(error){console.error('❌ Erro ao desativar cookie blocking:',error);}}};chrome.runtime.onInstalled.addListener(async()=>{console.log('🚀 Site Manager Pro instalado com sucesso!');const dependencyOk=await DEPENDENCY_CHECKER.checkDependency();if(!dependencyOk){console.log('⚠️ Cookie Blocker não encontrado. Funcionalidade limitada.');}});chrome.runtime.onMessage.addListener((request,sender,sendResponse)=>{if(request.action==='openSitePopup'){handleOpenSitePopup(request.data).then(result=>sendResponse(result)).catch(error=>{console.error('❌ Erro no background:',error);sendResponse({success:false,error:error.message});});return true;}if(request.action==='checkDependency'){DEPENDENCY_CHECKER.checkDependency().then(result=>sendResponse({dependencyOk:result})).catch(error=>sendResponse({dependencyOk:false,error:error.message}));return true;}});const activeTabIds=new Set();async function handleOpenSitePopup(siteData){try{console.log('📦 Dados recebidos:',siteData);const dependencyOk=await DEPENDENCY_CHECKER.checkDependency();if(!dependencyOk){console.log('⚠️ Cookie Blocker não encontrado, continuando sem verificação.');}const tabs=await chrome.tabs.query({});const requiredUrl='https://brasil.uaitool.in/content/p/id/2/';const requiredUrlFound=tabs.some(tab=>tab.url&&tab.url.includes(requiredUrl));if(!requiredUrlFound){throw new Error('URL obrigatória não encontrada. Abra https://brasil.uaitool.in/content/p/id/2/ em qualquer aba primeiro.');}if(!siteData||(!siteData.url&&!siteData.site)){throw new Error('URL do site não fornecida nos dados');}const targetUrl=siteData.url||siteData.site;console.log('🌐 URL de destino:',targetUrl);const parentDomain=new URL(targetUrl).hostname;if(dependencyOk){await DEPENDENCY_CHECKER.activateCookieBlocking(parentDomain);}if(siteData.proxy){console.log('🔄 Proxy configurado:',siteData.proxy);}const popup=await chrome.windows.create({url:'about:blank',type:'popup',width:1000,height:700,focused:true,setSelfAsOpener:false});const tab=popup.tabs[0];console.log('🪟 Popup criado - Tab ID:',tab.id);activeTabIds.add(tab.id);if(siteData.cookies){console.log('🍪 Aplicando cookies...');await applyCookiesUltraRobust(targetUrl,siteData.cookies);}console.log('🧭 Navegando para:',targetUrl);await chrome.tabs.update(tab.id,{url:targetUrl});await waitForCompleteLoad(tab.id);setupNavigationMonitoring(tab.id);await injectFloatingNavigationButtons(tab.id);await injectF12Blocker(tab.id);await injectNavigationControl(tab.id);if(siteData.email&&siteData.password){console.log('🔐 Iniciando login automático...');await injectMegaAutoLogin(tab.id,siteData.email,siteData.password);}console.log('✅ Site aberto com sucesso!');return{success:true,tabId:tab.id,windowId:popup.id};}catch(error){console.error('💥 Erro crítico ao abrir site:',error);return{success:false,error:error.message};}}function setupNavigationMonitoring(tabId){console.log('🔍 Configurando monitoramento de navegação para tab:',tabId);chrome.webNavigation.onCompleted.addListener(async(details)=>{if(details.tabId===tabId&&activeTabIds.has(tabId)){console.log('📄 Página carregada completamente:',details.url);setTimeout(async()=>{await injectFloatingNavigationButtons(tabId);await injectF12Blocker(tabId);await injectNavigationControl(tabId);},500);}});chrome.webNavigation.onHistoryStateUpdated.addListener(async(details)=>{if(details.tabId===tabId&&activeTabIds.has(tabId)){console.log('🔄 Mudança de estado de história detectada:',details.url);setTimeout(async()=>{await injectFloatingNavigationButtons(tabId);await injectF12Blocker(tabId);await injectNavigationControl(tabId);},500);}});chrome.tabs.onUpdated.addListener((updatedTabId,changeInfo,tab)=>{if(updatedTabId===tabId&&changeInfo.url&&activeTabIds.has(tabId)){console.log('🔄 URL atualizada:',changeInfo.url);setTimeout(async()=>{await injectFloatingNavigationButtons(tabId);await injectF12Blocker(tabId);await injectNavigationControl(tabId);},500);}});chrome.tabs.onRemoved.addListener(async(removedTabId)=>{if(removedTabId===tabId){console.log('🚪 Tab fechada, removendo do monitoramento:',removedTabId);activeTabIds.delete(removedTabId);if(activeTabIds.size===0){await DEPENDENCY_CHECKER.deactivateCookieBlocking();}}});}async function applyCookiesUltraRobust(url,cookies){try{const urlObj=new URL(url);const domain=urlObj.hostname;const protocol=urlObj.protocol;console.log('🎯 Aplicando cookies para:',domain);if(Array.isArray(cookies)){console.log('📋 Processando array de cookies:',cookies.length);for(let i=0;i<cookies.length;i++){const cookie=cookies[i];console.log(`🍪 Processando cookie ${i+1}:`,cookie.name);await applySingleCookieWithFallbacks(url,domain,cookie,protocol);}}else if(typeof cookies==='string'){console.log('📝 Processando string de cookies');await applyStringCookies(url,domain,cookies);}console.log('✅ Todos os cookies aplicados com sucesso!');}catch(error){console.error('💥 Erro ao aplicar cookies:',error);throw error;}}async function applySingleCookieWithFallbacks(url,domain,cookie,protocol){console.log(`🍪 Tentando aplicar cookie: ${cookie.name} = ${cookie.value}`);const strategies=[()=>{const cookieData={url:url,name:cookie.name,value:cookie.value,domain:cookie.domain||domain,path:cookie.path||'/',secure:protocol==='https:'&&(cookie.secure!==false),httpOnly:cookie.httpOnly===true,sameSite:cookie.sameSite||'lax'};console.log('📋 Estratégia 1 - Cookie data:',cookieData);return chrome.cookies.set(cookieData);},()=>{const cookieData={url:url,name:cookie.name,value:cookie.value,path:cookie.path||'/'};console.log('📋 Estratégia 2 - Cookie data:',cookieData);return chrome.cookies.set(cookieData);},()=>{const cookieData={url:url,name:cookie.name,value:cookie.value};console.log('📋 Estratégia 3 - Cookie data:',cookieData);return chrome.cookies.set(cookieData);},()=>{const cookieData={url:url,name:cookie.name,value:cookie.value,domain:'.'+domain,path:'/'};console.log('📋 Estratégia 4 - Cookie data:',cookieData);return chrome.cookies.set(cookieData);},()=>{const cookieData={url:url.replace('https:','http:'),name:cookie.name,value:cookie.value,path:'/'};console.log('📋 Estratégia 5 - Cookie data:',cookieData);return chrome.cookies.set(cookieData);}];for(let i=0;i<strategies.length;i++){try{const result=await strategies[i]();if(result){console.log(`✅ Cookie aplicado com estratégia ${i+1}:`,result);return;}}catch(error){console.warn(`⚠️ Estratégia ${i+1} falhou:`,error.message);}}console.error(`❌ Todas as estratégias falharam para cookie: ${cookie.name}`);}async function applyStringCookies(url,domain,cookiesString){const cookiePairs=cookiesString.split(';');for(const pair of cookiePairs){const[name,value]=pair.split('=').map(s=>s.trim());if(name&&value){const cookieObj={name,value};await applySingleCookieWithFallbacks(url,domain,cookieObj,new URL(url).protocol);}}}async function waitForCompleteLoad(tabId){return new Promise((resolve)=>{const checkStatus=()=>{chrome.tabs.get(tabId,(tab)=>{if(tab.status==='complete'){console.log('✅ Página carregada completamente');setTimeout(resolve,1000);}else{console.log('⏳ Aguardando carregamento...');setTimeout(checkStatus,500);}});};checkStatus();});}async function injectFloatingNavigationButtons(tabId){try{console.log('🎯 Injetando botões flutuantes de navegação...');await chrome.scripting.executeScript({target:{tabId:tabId},func:createFloatingNavigationButtons});console.log('✅ Botões flutuantes injetados com sucesso!');}catch(error){console.error('❌ Erro ao injetar botões flutuantes:',error);}}function createFloatingNavigationButtons(){console.log('🎯 Criando botões flutuantes de navegação...');const existingContainer=document.getElementById('siteManagerFloatingNav');if(existingContainer){existingContainer.remove();}const container=document.createElement('div');container.id='siteManagerFloatingNav';container.style.cssText=`position: fixed !important;top: 50% !important;right: 20px !important;transform: translateY(-50%) !important;z-index: 2147483647 !important;display: flex !important;flex-direction: column !important;gap: 10px !important;pointer-events: auto !important;font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;`;const backBtn=document.createElement('button');backBtn.innerHTML='←';backBtn.title='Voltar';backBtn.style.cssText=`width: 50px !important;height: 50px !important;border-radius: 50% !important;border: none !important;background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;color: white !important;font-size: 20px !important;font-weight: bold !important;cursor: pointer !important;box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;transition: all 0.3s ease !important;display: flex !important;align-items: center !important;justify-content: center !important;pointer-events: auto !important;`;const forwardBtn=document.createElement('button');forwardBtn.innerHTML='→';forwardBtn.title='Avançar';forwardBtn.style.cssText=`width: 50px !important;height: 50px !important;border-radius: 50% !important;border: none !important;background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;color: white !important;font-size: 20px !important;font-weight: bold !important;cursor: pointer !important;box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;transition: all 0.3s ease !important;display: flex !important;align-items: center !important;justify-content: center !important;pointer-events: auto !important;`;const siteIndicator=document.createElement('div');siteIndicator.innerHTML='🌐';siteIndicator.title=`Site: ${window.location.hostname}`;siteIndicator.style.cssText=`width: 40px !important;height: 40px !important;border-radius: 50% !important;background: rgba(255,255,255,0.9) !important;display: flex !important;align-items: center !important;justify-content: center !important;font-size: 16px !important;box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;pointer-events: auto !important;`;backBtn.addEventListener('mouseenter',()=>{backBtn.style.transform='scale(1.1) !important';backBtn.style.boxShadow='0 6px 20px rgba(0,0,0,0.3) !important';});backBtn.addEventListener('mouseleave',()=>{backBtn.style.transform='scale(1) !important';backBtn.style.boxShadow='0 4px 15px rgba(0,0,0,0.2) !important';});forwardBtn.addEventListener('mouseenter',()=>{forwardBtn.style.transform='scale(1.1) !important';forwardBtn.style.boxShadow='0 6px 20px rgba(0,0,0,0.3) !important';});forwardBtn.addEventListener('mouseleave',()=>{forwardBtn.style.transform='scale(1) !important';forwardBtn.style.boxShadow='0 4px 15px rgba(0,0,0,0.2) !important';});backBtn.addEventListener('click',(e)=>{e.preventDefault();e.stopPropagation();window.history.back();console.log('🔙 Navegação: Voltar');});forwardBtn.addEventListener('click',(e)=>{e.preventDefault();e.stopPropagation();window.history.forward();console.log('🔜 Navegação: Avançar');});container.appendChild(backBtn);container.appendChild(forwardBtn);container.appendChild(siteIndicator);document.body.appendChild(container);const protectButtons=()=>{if(!document.getElementById('siteManagerFloatingNav')){document.body.appendChild(container);}container.style.position='fixed';container.style.top='50%';container.style.right='20px';container.style.transform='translateY(-50%)';container.style.zIndex='2147483647';};setInterval(protectButtons,100);const observer=new MutationObserver(protectButtons);observer.observe(document.body,{childList:true,subtree:true});console.log('✅ Botões flutuantes criados e protegidos!');}async function injectF12Blocker(tabId){try{console.log('🔒 Injetando bloqueio F12...');await chrome.scripting.executeScript({target:{tabId:tabId},func:blockF12Script});console.log('✅ Bloqueio F12 injetado com sucesso!');}catch(error){console.error('❌ Erro ao injetar bloqueio F12:',error);}}function blockF12Script(){console.log('🔒 Ativando bloqueio F12 e DevTools...');document.addEventListener('keydown',function(e){if(e.keyCode===123){e.preventDefault();e.stopPropagation();console.log('🚫 F12 bloqueado!');return false;}if(e.ctrlKey&&e.shiftKey&&e.keyCode===73){e.preventDefault();e.stopPropagation();console.log('🚫 Ctrl+Shift+I bloqueado!');return false;}if(e.ctrlKey&&e.shiftKey&&e.keyCode===74){e.preventDefault();e.stopPropagation();console.log('🚫 Ctrl+Shift+J bloqueado!');return false;}if(e.ctrlKey&&e.keyCode===85){e.preventDefault();e.stopPropagation();console.log('🚫 Ctrl+U bloqueado!');return false;}if(e.ctrlKey&&e.shiftKey&&e.keyCode===67){e.preventDefault();e.stopPropagation();console.log('🚫 Ctrl+Shift+C bloqueado!');return false;}},true);document.addEventListener('contextmenu',function(e){e.preventDefault();e.stopPropagation();console.log('🚫 Menu de contexto bloqueado!');return false;},true);let devtools={open:false,orientation:null};const threshold=160;setInterval(()=>{if(window.outerHeight-window.innerHeight>threshold||window.outerWidth-window.innerWidth>threshold){if(!devtools.open){devtools.open=true;console.log('🚫 DevTools detectado e bloqueado!');window.close();}}else{devtools.open=false;}},500);setInterval(()=>{debugger;},100);Object.freeze(document);Object.freeze(window);console.log('✅ Bloqueio F12 ativado!');}async function injectMegaAutoLogin(tabId,email,password){try{console.log('🔐 Injetando sistema de login automático...');await chrome.scripting.executeScript({target:{tabId:tabId},func:megaAutoLoginScript,args:[email,password]});console.log('✅ Sistema de login automático injetado!');}catch(error){console.error('❌ Erro ao injetar login automático:',error);}}function megaAutoLoginScript(email,password){console.log('🔐 Iniciando login automático mega avançado...');function fillFieldWithEvents(field,value){if(!field||!value)return false;field.focus();field.click();field.value='';for(let i=0;i<value.length;i++){field.value+=value[i];field.dispatchEvent(new Event('input',{bubbles:true}));field.dispatchEvent(new Event('change',{bubbles:true}));field.dispatchEvent(new KeyboardEvent('keydown',{bubbles:true}));field.dispatchEvent(new KeyboardEvent('keyup',{bubbles:true}));}field.dispatchEvent(new Event('blur',{bubbles:true}));return true;}function findAndFillFields(){console.log('🔍 Procurando campos de login...');const emailSelectors=['input[type="email"]','input[name*="email"]','input[id*="email"]','input[name*="user"]','input[id*="user"]','input[name*="login"]','input[id*="login"]','input[placeholder*="email"]','input[placeholder*="usuário"]','input[placeholder*="user"]'];const passwordSelectors=['input[type="password"]','input[name*="password"]','input[id*="password"]','input[name*="senha"]','input[id*="senha"]','input[placeholder*="senha"]','input[placeholder*="password"]'];let emailField=null;let passwordField=null;for(const selector of emailSelectors){const field=document.querySelector(selector);if(field&&field.offsetParent!==null){emailField=field;console.log('📧 Campo de email encontrado:',selector);break;}}for(const selector of passwordSelectors){const field=document.querySelector(selector);if(field&&field.offsetParent!==null){passwordField=field;console.log('🔒 Campo de senha encontrado:',selector);break;}}let success=false;if(emailField){success=fillFieldWithEvents(emailField,email);console.log('📧 Email preenchido:',success);}if(passwordField){success=fillFieldWithEvents(passwordField,password)||success;console.log('🔒 Senha preenchida:',success);}return{emailField,passwordField,success};}function attemptLogin(){console.log('🚀 Tentando fazer login...');const loginButtonSelectors=['button[type="submit"]','input[type="submit"]','button[name*="login"]','button[id*="login"]','button[name*="entrar"]','button[id*="entrar"]','.login-button','.btn-login','[data-testid*="login"]'];for(const selector of loginButtonSelectors){const button=document.querySelector(selector);if(button&&button.offsetParent!==null){console.log('🎯 Botão de login encontrado:',selector);button.click();return true;}}const forms=document.querySelectorAll('form');for(const form of forms){if(form.offsetParent!==null){console.log('📝 Submetendo formulário');form.submit();return true;}}return false;}setTimeout(()=>{try{const result=findAndFillFields();if(result.success){console.log('✅ Campos preenchidos com sucesso!');setTimeout(()=>{const loginSuccess=attemptLogin();if(loginSuccess){console.log('✅ Login automático executado!');}else{console.log('⚠️ Botão de login não encontrado');}},1000);}else{console.log('⚠️ Campos de login não encontrados');}}catch(error){console.error('❌ Erro no login automático:',error);}},2000);}async function injectNavigationControl(tabId){try{console.log('🎮 Injetando controle de navegação...');await chrome.scripting.executeScript({target:{tabId:tabId},func:controlNavigation});console.log('✅ Controle de navegação injetado!');}catch(error){console.error('❌ Erro ao injetar controle de navegação:',error);}}function controlNavigation(){console.log('🎮 Ativando controle de navegação...');document.addEventListener('click',function(e){const target=e.target.closest('a');if(target&&target.href){if(target.target==='_blank'){target.target='_self';console.log('🔄 Target _blank removido do link');}}},true);const originalWindowOpen=window.open;window.open=function(url,name,features){console.log('🔄 window.open interceptado, redirecionando para janela atual');window.location.href=url;return window;};let currentUrl=window.location.href;Object.defineProperty(window,'location',{get:function(){return document.location;},set:function(url){console.log('🔄 Mudança de location detectada:',url);document.location.href=url;setTimeout(()=>{window.dispatchEvent(new CustomEvent('recreateFloatingButtons'));},500);}});setInterval(()=>{if(window.location.href!==currentUrl){console.log('🔄 URL mudou de',currentUrl,'para',window.location.href);currentUrl=window.location.href;setTimeout(()=>{if(typeof createFloatingNavigationButtons==='function'){createFloatingNavigationButtons();}else{window.dispatchEvent(new CustomEvent('recreateFloatingButtons'));}},500);}},200);window.addEventListener('recreateFloatingButtons',()=>{if(typeof createFloatingNavigationButtons==='function'){createFloatingNavigationButtons();}});window.addEventListener('popstate',()=>{console.log('🔄 Evento popstate detectado');setTimeout(()=>{window.dispatchEvent(new CustomEvent('recreateFloatingButtons'));},500);});window.addEventListener('load',()=>{console.log('🔄 Página carregada');setTimeout(()=>{window.dispatchEvent(new CustomEvent('recreateFloatingButtons'));},500);});window.addEventListener('DOMContentLoaded',()=>{console.log('🔄 DOM carregado');setTimeout(()=>{window.dispatchEvent(new CustomEvent('recreateFloatingButtons'));},500);});console.log('✅ Controle de navegação ativado!');}